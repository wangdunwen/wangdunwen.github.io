<template>
  <div class="main" ref="main">
    <top></top>
    <div class="arrowLeft" @click="expand" v-show="arrowLeftShow">
      <i class="el-icon-caret-left" style="color: #009688;"></i>
    </div>
    <div class="arrowRight" @click="resize" v-show='arrowRightShow'>
      <i class="el-icon-caret-right" style="color: white;"></i>
    </div>
    <left v-show='leftShow' class='left'></left>
    <right :style="rightStyle"></right>
  </div>
</template>

<script>
import left from './main/Left';
import top from './main/Top';
import right from './main/Right';

export default {
  name: 'main',
  data () {
    return {
      leftShow: true,
      arrowLeftShow: true,
      arrowRightShow: false,
      rightStyle: {},
      screenWidth: document.body.clientWidth
    }
  },
  components: {
    left,
    top,
    right
  },
  methods: {
    expand() {
      this.leftShow = false;
      this.arrowLeftShow = false;
      this.arrowRightShow = true;
      this.rightStyle = {
        left: '3%'
      };
    },
    resize() {
      this.leftShow = true;
      this.arrowLeftShow = true;
      this.arrowRightShow = false;
      this.rightStyle = {
        left: '340px'
      };
    }
  },
  mounted() { 
    let _this = this;

    window.onresize = function temp () {
      if (document.body.scrollWidth <= 800) {
        _this.rightStyle = {};
      } else {
        if (!_this.leftShow) {
          _this.rightStyle = {
            left: "3%"
          };
        }
      }
    }
  },
  watch: {
    "$route": function () {
      // 让滚动条滚动至
      // this.$refs.main.scrollTop = "0px";
      // document.body.scrollTop = "0px";
      window.scrollTo(0,0);
    }
  }
}
</script>

<style scoped>
.main {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
}

.arrowLeft {
  position:absolute;
  top: calc(13% + 0px);
  left: 290px;
  width: 30px;
  height: 59px;
  padding: 0;
  z-index: 99;
  cursor:pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2rem;
  border: 1px solid #eee;
}

.left {
  position: absolute;
  top: 13%;
  left: 20px;
  display: flex;
  flex-direction: column;
  width: 300px;
}

.arrowRight {
  position:absolute;
  top: 13%;
  height: 10%;
  width: 2.4%;
  left: 0%;
  z-index: 99;
  cursor:pointer;
  background: #009688;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2rem;
}

@media only screen and (max-width: 800px) {
  .arrowLeft {
    display: none;
  }

  .arrowRight {
    display: none;
  }

  .left {
    display: none;
  }
}
</style>